
@{
    ViewBag.Title = "Relatórios Anuais";
}

@section breadcrumbs{
    <ol class="breadcrumb">
        <li><span class="glyphicon glyphicon-home"></span> <a href="@Url.Action("Index", "Home")" title="Home">Home</a></li>
        <li class="active">Relatórios Anuais</li>
    </ol>
}

@section scripts {
    <script src="@Url.Content("/Content/js/mosaic-script.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Content/js/app/relatorios/relatorios.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Content/js/app/relatorios/anual.js")" type="text/javascript"></script>
    
    <script type="text/javascript">
        /* -- Setar Class em expand menu -- */
        window.onload = setActiveMenu;

        function setActiveMenu() {
            $('li#usuarios').addClass('active');
            $('.mini-nav ul li#usuarios ul').attr('style', 'display: none !important;');
        }

        $(document).ready(function () {
            GetBusiness();
            $('#collapseFilter').collapse('show');
            $('#accordion .panel .panel-heading').children('h4').children('small').children('span').removeAttr('class');
            $('#accordion .panel .panel-heading').children('h4').children('small').children('span').attr('class', 'glyphicon glyphicon-chevron-down');
        });

    </script>

    <script id="botaoRelatorioAnualPisTemplate" type="text/x-kendo-template">
        # if(StatusId == "2") { #
        <a onclick='javascript: { AnualDetails(this,"PIS"); }' class='k-button' align='center'><span align='center' class='glyphicon glyphicon glyphicon-search'></span></a>
        # } else { #
        <a class='k-button' disabled><span class='glyphicon glyphicon glyphicon-search'></span></a>
        # } #
    </script>   

    <script id="botaoRelatorioAnualCofinsTemplate" type="text/x-kendo-template">
        # if(StatusId == "2") { #
        <a onclick='javascript: { AnualDetails(this,"COFINS"); }' class='k-button' align='center'><span align='center' class='glyphicon glyphicon glyphicon-search'></span></a>
        # } else { #
        <a class='k-button' disabled><span class='glyphicon glyphicon glyphicon-search'></span></a>
        # } #
    </script>   

    <script id="linkLogErroTemplate" type="text/x-kendo-template">
        # if(StatusId == "9") { #
        <a onclick='javascript: { ExibirErroApuracao(this); }' style='cursor: pointer;'>#=Status#</a>
        # } else { #
        <span>#=Status#</span>
        # } #
    </script>
}

<h1>Relatórios Anuais de Apuração de Tributos</h1>
<br />

@Html.Partial("_FilterReports")

<div class="row" style="margin-bottom: 15px;">
    <div class="col-sm-12">
        <div id="grid"></div>
    </div>
</div>

<div id="modalAnual" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" onclick="javascript: { CloseModal(this); }" aria-hidden="true">×</button>
                <center><h4 class="modal-title"><strong>Relatório Anual</strong></h4></center>
            </div>
            <div class="modal-body">
                <div class="body-excel" hidden></div>
                <h3 class="body-message"></h3>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnCancelar" class="btn btn-primary btn-xs" onclick="javascript: { CloseModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Fechar
                </button>
                <button type="button" id="btnGerarXLS" class="btn btn-success btn-xs" onclick="javascript: { GerarXLS(this, 'anual', true); }">
                    <span class="glyphicon glyphicon-save"></span> Gerar Excel
                </button>
                <button type="button" id="btnGerarPDF" class="btn btn-danger btn-xs" onclick="javascript: { GerarPDF(this, true); }">
                    <span class="glyphicon glyphicon-save"></span> Gerar PDF
                </button>
            </div>
        </div>
    </div>
</div>