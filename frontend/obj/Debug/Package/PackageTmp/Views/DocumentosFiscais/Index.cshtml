@{
    ViewBag.Title = "Documentos Fiscais";
}

@section breadcrumbs{
    <ol class="breadcrumb">
        <li><span class="glyphicon glyphicon-home"></span> <a href="@Url.Action("Index", "Home")" title="Home">Home</a></li>
        <li class="active">Documentos Fiscais</li>
    </ol>
}

<div id="window"></div>

<h1>Documentos Fiscais</h1>
<br />

@Html.Partial("_FilterDocs")

<div class="panel-group k-content" id="accordionHistorico" style="margin-right:35px">
    <div class="panel panel-primary">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordionHistorico" href="#collapseHistorico">
            <h4 class="panel-title">
                <small><span class="glyphicon glyphicon-chevron-right"></span></small> Histórico de Modificações de Documentos Fiscais
            </h4>
        </div>
        <div id="collapseHistorico" class="panel-collapse collapse">
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-12 col-sm-12">
                        <div id="gridHistoricoPeriodo"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<h3 id="lbPeriodoFechado" style="text-align: center;font-weight:bold"></h3>
<br />

<div class="row border-bottom white-bg dashboard-header" style="margin-bottom: 15px;margin-right:25px;padding-bottom:25px;">
    <div class="col-sm-12">
        <div id="grid"></div>
    </div>
</div>

<div id="modalVerItens" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong></strong></h4></center>
            </div>
            <div class="modal-body">
                <div class="row" style="margin-left: 10px;">
                    <div class="form-group">
                    </div>
                </div>
                <div id="gridItens"></div>
            </div>
            <div class="modal-footer">
                <label id="lbPeriodoFechadoItem" style="color:red;margin-right: 15px;font-weight:bold"></label>
                <button type="button" id="btnCancelar" class="btn btn-danger btn-xs" onclick="javascript: { DestruirModalItem(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="modalFiltros" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong></strong></h4></center>
            </div>
            <div class="modal-body">
                <div class="row" style="margin-left: 10px;">
                    <div class="form-group">
                    </div>
                </div>
                <div id="gridFiltros"></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnAplicarFiltros" class="btn btn-success btn-xs" onclick="javascript: { AplicarFiltros(this); }">
                    <span class="glyphicon glyphicon-ok"></span> Aplicar Filtros
                </button>
                <button type="button" id="btnCloseModalFiltros" class="btn btn-default btn-xs" onclick="javascript: { DestruirModalFiltros(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Voltar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="modalContrutorFiltro" class="modal fade">
    <div class="modal-dialog modal-md">
        <div class="modal-content">            
            <div class="modal-header">
                <button type="button" class="close" onclick="javascript: { CloseModal(this); }" aria-hidden="true">×</button>
                <center><h4 class="modal-title"><strong>Construtor Filtro Total Item</strong></h4></center>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div class="row">
                        <div class="col-sm-6">
                            <input id="ddlComparacao" name="ddlComparacao" class="filter" style="width: 100%;" />
                        </div>
                        <div class="col-sm-6">
                            <input id="tbValor" name="tbValor" value="0,00" class="k-textbox" style="width: 100%;text-align:right" />
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="row" style="text-align:right">
                        <div class="col-sm-6">
                            <input id="selectCombinacao" type="checkbox" data-field="selectCombinacao" checked data-on-text="E" data-off-text="OU" data-size="small" style="width: 100%;">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="row">
                        <div class="col-sm-6">
                            <input id="ddlComparacao2" name="ddlComparacao2" class="filter" style="width: 100%;" />
                        </div>
                        <div class="col-sm-6">
                            <input id="tbValor2" name="tbValor2" value="0,00" class="k-textbox" style="width: 100%;text-align:right" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnAplicarFiltros" class="btn btn-success btn-xs" onclick="javascript: { AplicarFiltros(this); }">
                    <span class="glyphicon glyphicon-ok"></span> Gerar Filtro
                </button>
                <button type="button" id="btnCloseModalFiltros" class="btn btn-danger btn-xs" onclick="javascript: { CloseModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Voltar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="modalHistorico" class="modal fade">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <center><h4 class="modal-title"><strong></strong></h4></center>
            </div>
            <div class="modal-body">
                <div class="row" style="margin-left: 10px;">
                    <div class="form-group">
                    </div>
                </div>
                <div id="gridHistorico"></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnCancelar" class="btn btn-success btn-xs" onclick="javascript: { CloseModal(this); }">
                    <span class="glyphicon glyphicon-remove"></span> Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="confirmacaoRemover"></div>

<script type="text/x-kendo-template" id="RemoverTemplate">
    Você realmente deseja remover o Item Número
    <strong>#= NumeroItem #</strong> ? </p>
    <button class="k-button" id="yesButton">Sim</button>
    <button class="k-button" id="noButton"> Não</button>
</script>

<input type="hidden" id="idValidacao" value="0" />

@section scripts {
    <script src="@Url.Content("/Content/js/app/documentosfiscais/documentosfiscais.js")" type="text/javascript"></script>

    <script type="text/javascript">
        /* -- Setar Class em expand menu -- */
        window.onload = setActiveMenu;
        function setActiveMenu() {
            $('li#usuarios').addClass('active');
            $('.mini-nav ul li#usuarios ul').attr('style', 'display: none !important;');
        }
        $(document).ready(function () {
            CarregaComponentes();
        });
    </script>

    <script id="ValidadoTemplate" type="text/x-kendo-template">
        <a href="#" target="_blank">
            <i class="glyphicon glyphicon-ok-circle"></i>
        </a>
    </script>
}